
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Python Interface &#8212; Introduction to the visual programming interface pyiron_core</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.8ecb98da25f57f5357bf6f572d296f466b2cfe2517ffebfabe82451661e28f02.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'pythoninterface';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Introduction" href="introduction.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="README.html">
  
  
  
  
  
  
    <p class="title logo__title">Introduction to the visual programming interface pyiron_core</p>
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="README.html">
                    pyiron_core
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Python Interface</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://mybinder.org/v2/gh/pyiron-dev/pyiron-core-introduction/master?urlpath=lab/tree/pythoninterface.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch on Binder"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img alt="Binder logo" src="_static/images/logo_binder.svg">
  </span>
<span class="btn__text-container">Binder</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/pythoninterface.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Python Interface</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#young-s-modulus">Young’s Modulus</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#python-functions">Python Functions</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#from-functions-to-modulus">From Functions to Modulus</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="python-interface">
<h1>Python Interface<a class="headerlink" href="#python-interface" title="Link to this heading">#</a></h1>
<p>On of the core strength of <a class="reference external" href="https://pyiron.org">pyiron</a> is the one to one mapping between the visual programming interface and the underlying Python framework. This enables collaborators with different preferences to work seamlessly together, as the same workflow can be edited from the Python interface or the visual programming interface.</p>
<section id="young-s-modulus">
<h2>Young’s Modulus<a class="headerlink" href="#young-s-modulus" title="Link to this heading">#</a></h2>
<p>To demonstrate this functionality we take the same Young’s Modulus example from the previous tutorial but this time rather than creating the workflow visually, we first create and evaluate it from Python before transferring it to the visual programming interface.</p>
<p>Again, as a reminder in Jupyter notebooks the individual cells are evaluated by pressing <strong>Shift</strong> and <strong>Enter</strong>.</p>
<p>Start by creating a workflow named <code class="docutils literal notranslate"><span class="pre">YoungsModulusPython</span></code> using the <code class="docutils literal notranslate"><span class="pre">Workflow</span></code> class from the <code class="docutils literal notranslate"><span class="pre">pyiron_core</span></code> module:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">pyiron_core</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">wf</span> <span class="o">=</span> <span class="n">pyiron_core</span><span class="o">.</span><span class="n">Workflow</span><span class="p">(</span><span class="s2">&quot;YoungsModulusPython&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>After the workflow is create the next step is adding the corresponding workflow nodes. These nodes are available in the <code class="docutils literal notranslate"><span class="pre">pyiron_nodes</span></code> module which is located in the <code class="docutils literal notranslate"><span class="pre">~/pyiron_nodes</span></code> folder in the home directory of the user to allow the user to modify and extend their <code class="docutils literal notranslate"><span class="pre">pyiron_nodes</span></code>. In analogy to the visual programming example four nodes are imported:</p>
<ul class="simple">
<li><p>The <strong>ReadCSV</strong> node from the <code class="docutils literal notranslate"><span class="pre">pyiron_nodes.basic.file</span></code> module.</p></li>
<li><p>The <strong>ConvertLoadToStress</strong> node from the <code class="docutils literal notranslate"><span class="pre">pyiron_nodes.experiment.youngs_modulus</span></code> module.</p></li>
<li><p>The <strong>CalculateYoungsModulus</strong> node again from the <code class="docutils literal notranslate"><span class="pre">pyiron_nodes.experiment.youngs_modulus</span></code> module.</p></li>
<li><p>Finally, the <strong>Plot</strong> node again from the <code class="docutils literal notranslate"><span class="pre">pyiron_nodes.experiment.youngs_modulus</span></code> module.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">pyiron_nodes.basic.file</span><span class="w"> </span><span class="kn">import</span> <span class="n">ReadCSV</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pyiron_nodes.experiment.youngs_modulus</span><span class="w"> </span><span class="kn">import</span> <span class="n">ConvertLoadToStress</span><span class="p">,</span> <span class="n">CalculateYoungsModulus</span><span class="p">,</span> <span class="n">Plot</span>
</pre></div>
</div>
</div>
</div>
<p>The node functions can be handled similar to regular Python functions, with the major difference that the outputs of these Python functions have to be assigned to workflow objects. In analogy, to the visual programming construction of the Young’s modulus the <strong>ReadCSV</strong> node can be renamed by assigning it to <code class="docutils literal notranslate"><span class="pre">wf.ReadDataset</span></code>. In this case <code class="docutils literal notranslate"><span class="pre">wf.ReadDataset</span></code> is the new node created in the workflow graph.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">wf</span><span class="o">.</span><span class="n">ReadDataset</span> <span class="o">=</span> <span class="n">ReadCSV</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="s2">&quot;data/dataset_1.csv&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>It is important to node that nodes cannot be overwritten. When the same line is executed again <code class="docutils literal notranslate"><span class="pre">pyiron_core</span></code> complains and returns a <code class="docutils literal notranslate"><span class="pre">ValueError:</span> <span class="pre">Node</span> <span class="pre">with</span> <span class="pre">label</span> <span class="pre">...</span> <span class="pre">already</span> <span class="pre">exists</span></code> error. This can be addressed by restarting the construction of the workflow. So typically all the commands to create a workflow are written in one Jupyter notebook cell.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">wf</span> <span class="o">=</span> <span class="n">pyiron_core</span><span class="o">.</span><span class="n">Workflow</span><span class="p">(</span><span class="s2">&quot;YoungsModulusPython&quot;</span><span class="p">)</span>
<span class="n">wf</span><span class="o">.</span><span class="n">ReadDataset</span> <span class="o">=</span> <span class="n">ReadCSV</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="s2">&quot;data/dataset_1.csv&quot;</span><span class="p">)</span>
<span class="n">wf</span><span class="o">.</span><span class="n">ConvertLoadToStress</span> <span class="o">=</span> <span class="n">ConvertLoadToStress</span><span class="p">(</span><span class="n">df</span><span class="o">=</span><span class="n">wf</span><span class="o">.</span><span class="n">ReadDataset</span><span class="p">,</span> <span class="n">area</span><span class="o">=</span><span class="mi">120</span><span class="p">)</span>
<span class="n">wf</span><span class="o">.</span><span class="n">CalculateYoungsModulus</span> <span class="o">=</span> <span class="n">CalculateYoungsModulus</span><span class="p">(</span>
    <span class="n">stress</span><span class="o">=</span><span class="n">wf</span><span class="o">.</span><span class="n">ConvertLoadToStress</span><span class="o">.</span><span class="n">outputs</span><span class="o">.</span><span class="n">stress</span><span class="p">,</span> 
    <span class="n">strain</span><span class="o">=</span><span class="n">wf</span><span class="o">.</span><span class="n">ConvertLoadToStress</span><span class="o">.</span><span class="n">outputs</span><span class="o">.</span><span class="n">strain</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">wf</span><span class="o">.</span><span class="n">Plot</span> <span class="o">=</span> <span class="n">Plot</span><span class="p">(</span>
    <span class="n">stress</span><span class="o">=</span><span class="n">wf</span><span class="o">.</span><span class="n">ConvertLoadToStress</span><span class="o">.</span><span class="n">outputs</span><span class="o">.</span><span class="n">stress</span><span class="p">,</span> 
    <span class="n">strain</span><span class="o">=</span><span class="n">wf</span><span class="o">.</span><span class="n">ConvertLoadToStress</span><span class="o">.</span><span class="n">outputs</span><span class="o">.</span><span class="n">strain</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>As the <strong>ReadCSV</strong> node produces only a single output the <code class="docutils literal notranslate"><span class="pre">pandas</span></code> Dataframe named <code class="docutils literal notranslate"><span class="pre">csv</span></code> it is sufficient to provide the whole node, in this case <strong>wf.ReadDataset</strong> as an input to the <strong>df</strong> parameter of the <strong>ConvertLoadToStress</strong> node. For nodes which return multiple outputs, the individual outputs can be selected with the extension <code class="docutils literal notranslate"><span class="pre">outputs</span></code> followed by the name of the output. So to transfer the <code class="docutils literal notranslate"><span class="pre">stress</span></code> and <code class="docutils literal notranslate"><span class="pre">strain</span></code> from the <strong>ConvertLoadToStress</strong> node to the <strong>CalculateYoungsModulus</strong> node and <strong>Plot</strong> node, you can use: <code class="docutils literal notranslate"><span class="pre">wf.ConvertLoadToStress.outputs.stress</span></code> and <code class="docutils literal notranslate"><span class="pre">wf.ConvertLoadToStress.outputs.strain</span></code> correspondingly.</p>
<p>To evaluate a given node call <code class="docutils literal notranslate"><span class="pre">pull()</span></code> for this node. For example the <strong>CalculateYoungsModulus</strong> node is evaluated using <code class="docutils literal notranslate"><span class="pre">wf.CalculateYoungsModulus.pull()</span></code>. Only at this point the execution of the workflow is triggered, the CSV file is loaded, the load is converted to stress and strain and afterwards those are used as inputs to calculate the Young’s Modulus.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">wf</span><span class="o">.</span><span class="n">CalculateYoungsModulus</span><span class="o">.</span><span class="n">pull</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>175.18008476297007
</pre></div>
</div>
</div>
</div>
<p>In the same way the stress strain curve can be visualized by calling <code class="docutils literal notranslate"><span class="pre">pull()</span></code> on the <strong>Plot</strong> node:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">wf</span><span class="o">.</span><span class="n">Plot</span><span class="o">.</span><span class="n">pull</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/3eaa34bb75024c96808dcb19a7282e1952ea08bd5f738ce1d6fb1947f5e0ca07.png" src="_images/3eaa34bb75024c96808dcb19a7282e1952ea08bd5f738ce1d6fb1947f5e0ca07.png" />
<img alt="_images/3eaa34bb75024c96808dcb19a7282e1952ea08bd5f738ce1d6fb1947f5e0ca07.png" src="_images/3eaa34bb75024c96808dcb19a7282e1952ea08bd5f738ce1d6fb1947f5e0ca07.png" />
</div>
</div>
<p>Finally, the same workflow can be used in the visual programming interface, by providing the workflow and the <code class="docutils literal notranslate"><span class="pre">pyiron_nodes</span></code> directory as additional inputs.
<img alt="Youngsmodulus" src="_images/calculateYoungModulus.png" /></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pyiron_core</span><span class="o">.</span><span class="n">PyironFlow</span><span class="p">(</span><span class="n">wf_list</span><span class="o">=</span><span class="p">[</span><span class="n">wf</span><span class="p">],</span> <span class="n">nodes_path</span><span class="o">=</span><span class="s2">&quot;pyiron_nodes&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">gui</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>added node path:  /home/jovyan
</pre></div>
</div>
<script type="application/vnd.jupyter.widget-view+json">{"version_major": 2, "version_minor": 0, "model_id": "a95d5f78a3ce4828ac6cf29c04acc17d"}</script></div>
</div>
<p>The different workflows in the <code class="docutils literal notranslate"><span class="pre">wf_list</span></code> are loaded as different tabs. In case a workflow is not directly visible you can use the <strong>Refresh</strong> button in the top left menu of the canvas to refresh the visualization. Finally, to evaluate the workflow again you can click the <strong>Run</strong> button on the menu on top of the <strong>Plot</strong> node. Or alternatively, you can also evaluate one node at a time, which can be helpful for debugging.</p>
</section>
<section id="python-functions">
<h2>Python Functions<a class="headerlink" href="#python-functions" title="Link to this heading">#</a></h2>
<p>On of the core features of the pyiron workflow framework is its extendability, in particular pyiron allows you to define nodes directly inside your Jupyter notebook to simplify rapid prototyping. Again staying with the example of the Youngs modulus we define the individual Python functions using the <code class="docutils literal notranslate"><span class="pre">&#64;as_function_node</span></code> decorator.</p>
<p>Starting with the <strong>ReadCSV</strong> node to read the CSV file and convert it to a <code class="docutils literal notranslate"><span class="pre">pandas</span></code> DataFrame. By adding the parameter <code class="docutils literal notranslate"><span class="pre">&quot;csv&quot;</span></code> in the <code class="docutils literal notranslate"><span class="pre">as_function_node</span></code> decorator the output port of the <strong>ReadCSV</strong> node is named <code class="docutils literal notranslate"><span class="pre">csv</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nd">@pyiron_core</span><span class="o">.</span><span class="n">as_function_node</span><span class="p">(</span><span class="s2">&quot;csv&quot;</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">ReadCSV</span><span class="p">(</span><span class="n">filename</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">header</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">decimal</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="n">delimiter</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;;&quot;</span><span class="p">):</span>
    <span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
    <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="n">delimiter</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="n">header</span><span class="p">,</span> <span class="n">decimal</span><span class="o">=</span><span class="n">decimal</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>A separate naming of the output variables is commonly not necessary when only individual variables are returned. This is enabled by analysing the source code of the Python functions. For example in the <strong>ConvertLoadToStress</strong> the variables <code class="docutils literal notranslate"><span class="pre">stress</span></code> and <code class="docutils literal notranslate"><span class="pre">strain</span></code> are already defined internally and these are the only variables returned at the end of the function, consequently it is not necessary to provide any additional output name for the <code class="docutils literal notranslate"><span class="pre">as_function_node</span></code> decorator:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nd">@pyiron_core</span><span class="o">.</span><span class="n">as_function_node</span>
<span class="k">def</span><span class="w"> </span><span class="nf">ConvertLoadToStress</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">area</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Read in csv file, convert load to stress</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">kN_to_N</span> <span class="o">=</span> <span class="mf">0.001</span>  <span class="c1"># convert kiloNewton to Newton</span>
    <span class="n">mm2_to_m2</span> <span class="o">=</span> <span class="mf">1e-6</span>  <span class="c1"># convert square millimeters to square meters</span>
    <span class="n">df</span><span class="p">[</span><span class="s2">&quot;Stress&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;Load&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="n">kN_to_N</span> <span class="o">/</span> <span class="p">(</span><span class="n">area</span> <span class="o">*</span> <span class="n">mm2_to_m2</span><span class="p">)</span>
    <span class="c1">#although it says extensometer elongation, the values are in percent! </span>
    <span class="n">strain</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;Extensometer elongation&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
    <span class="c1">#subtract the offset from the dataset</span>
    <span class="n">strain</span> <span class="o">=</span> <span class="n">strain</span> <span class="o">-</span> <span class="n">strain</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">stress</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;Stress&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">stress</span><span class="p">,</span> <span class="n">strain</span>
</pre></div>
</div>
</div>
</div>
<p>The stress and strain values, which are outputs of the <strong>ConvertLoadToStress</strong> node are used for a linear fit in the <strong>CalculateYoungsModulus</strong> node, and the Young’s modulus is calculated as the slope of this linear fit. The calculated value of Young’s modulus will depend on the <code class="docutils literal notranslate"><span class="pre">strain_cutoff</span></code> parameter. Internally, this function is using the <code class="docutils literal notranslate"><span class="pre">numpy</span></code> package for fitting. The import statement is included in the function body to minimize the risk of conflicts.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nd">@pyiron_core</span><span class="o">.</span><span class="n">as_function_node</span>
<span class="k">def</span><span class="w"> </span><span class="nf">CalculateYoungsModulus</span><span class="p">(</span><span class="n">stress</span><span class="p">,</span> <span class="n">strain</span><span class="p">,</span> <span class="n">strain_cutoff</span><span class="o">=</span><span class="mf">0.2</span><span class="p">):</span>
    <span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
    <span class="n">percent_to_fraction</span> <span class="o">=</span> <span class="mi">100</span>  <span class="c1"># convert</span>
    <span class="n">MPa_to_GPa</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">/</span> <span class="mi">1000</span>  <span class="c1"># convert MPa to GPa</span>
    <span class="n">arg</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">argsort</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">strain</span><span class="p">)</span> <span class="o">-</span> <span class="n">strain_cutoff</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">fit</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">polyfit</span><span class="p">(</span><span class="n">strain</span><span class="p">[:</span><span class="n">arg</span><span class="p">],</span> <span class="n">stress</span><span class="p">[:</span><span class="n">arg</span><span class="p">],</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">youngs_modulus</span> <span class="o">=</span> <span class="n">fit</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">percent_to_fraction</span> <span class="o">*</span> <span class="n">MPa_to_GPa</span>
    <span class="k">return</span> <span class="n">youngs_modulus</span>
</pre></div>
</div>
</div>
</div>
<p>Finally, the <strong>Plot</strong> node is defined, which internally uses the <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> library to create an xy-plot of the stress over strain curve.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nd">@pyiron_core</span><span class="o">.</span><span class="n">as_function_node</span><span class="p">(</span><span class="s2">&quot;fig&quot;</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">Plot</span><span class="p">(</span><span class="n">stress</span><span class="p">,</span> <span class="n">strain</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;-&quot;</span><span class="p">):</span>
    <span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">strain</span><span class="p">,</span> <span class="n">stress</span><span class="p">,</span> <span class="nb">format</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Strain [%]&quot;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Stress [MPa]&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">fig</span>
</pre></div>
</div>
</div>
</div>
<p>With these four functions the workflow can again be constructed in analogy to the previous section and the same workflow can also again be loaded in the visual programming interface to share it with users who prefer the visual programming interface.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">wf</span> <span class="o">=</span> <span class="n">pyiron_core</span><span class="o">.</span><span class="n">Workflow</span><span class="p">(</span><span class="s2">&quot;YoungsModulusFunction&quot;</span><span class="p">)</span>
<span class="n">wf</span><span class="o">.</span><span class="n">ReadDataset</span> <span class="o">=</span> <span class="n">ReadCSV</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="s2">&quot;data/dataset_1.csv&quot;</span><span class="p">)</span>
<span class="n">wf</span><span class="o">.</span><span class="n">ConvertLoadToStress</span> <span class="o">=</span> <span class="n">ConvertLoadToStress</span><span class="p">(</span><span class="n">df</span><span class="o">=</span><span class="n">wf</span><span class="o">.</span><span class="n">ReadDataset</span><span class="p">,</span> <span class="n">area</span><span class="o">=</span><span class="mi">120</span><span class="p">)</span>
<span class="n">wf</span><span class="o">.</span><span class="n">CalculateYoungsModulus</span> <span class="o">=</span> <span class="n">CalculateYoungsModulus</span><span class="p">(</span>
    <span class="n">stress</span><span class="o">=</span><span class="n">wf</span><span class="o">.</span><span class="n">ConvertLoadToStress</span><span class="o">.</span><span class="n">outputs</span><span class="o">.</span><span class="n">stress</span><span class="p">,</span> 
    <span class="n">strain</span><span class="o">=</span><span class="n">wf</span><span class="o">.</span><span class="n">ConvertLoadToStress</span><span class="o">.</span><span class="n">outputs</span><span class="o">.</span><span class="n">strain</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">wf</span><span class="o">.</span><span class="n">Plot</span> <span class="o">=</span> <span class="n">Plot</span><span class="p">(</span>
    <span class="n">stress</span><span class="o">=</span><span class="n">wf</span><span class="o">.</span><span class="n">ConvertLoadToStress</span><span class="o">.</span><span class="n">outputs</span><span class="o">.</span><span class="n">stress</span><span class="p">,</span> 
    <span class="n">strain</span><span class="o">=</span><span class="n">wf</span><span class="o">.</span><span class="n">ConvertLoadToStress</span><span class="o">.</span><span class="n">outputs</span><span class="o">.</span><span class="n">strain</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">wf</span><span class="o">.</span><span class="n">Plot</span><span class="o">.</span><span class="n">pull</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/3eaa34bb75024c96808dcb19a7282e1952ea08bd5f738ce1d6fb1947f5e0ca07.png" src="_images/3eaa34bb75024c96808dcb19a7282e1952ea08bd5f738ce1d6fb1947f5e0ca07.png" />
<img alt="_images/3eaa34bb75024c96808dcb19a7282e1952ea08bd5f738ce1d6fb1947f5e0ca07.png" src="_images/3eaa34bb75024c96808dcb19a7282e1952ea08bd5f738ce1d6fb1947f5e0ca07.png" />
</div>
</div>
</section>
<section id="from-functions-to-modulus">
<h2>From Functions to Modulus<a class="headerlink" href="#from-functions-to-modulus" title="Link to this heading">#</a></h2>
<p>If you use the file browser in jupyter lab and navigate to the <code class="docutils literal notranslate"><span class="pre">pyiron_nodes</span></code> folder and inside open the subfolder <code class="docutils literal notranslate"><span class="pre">experiment</span></code> and the Python file <code class="docutils literal notranslate"><span class="pre">youngs_modulus.py</span></code> then you see that the nodes we defined in the Jupyter notebook are exactly the same as the ones which are used in the <strong>Node Library</strong> of the visual programming interface. More specifically, you can simply add your own nodes to the local <strong>Node Library</strong> by using the <code class="docutils literal notranslate"><span class="pre">&#64;as_function_node</span></code> decorator and placing them in the <code class="docutils literal notranslate"><span class="pre">pyiron_nodes</span></code> folder.</p>
<p>For development purposes it might even be helpful to create a separate folder in the <code class="docutils literal notranslate"><span class="pre">pyiron_nodes</span></code> or a standalone nodes library for you project. All you have to do to load nodes from a different location on the file system is to change the <code class="docutils literal notranslate"><span class="pre">nodes_path</span></code> when you initialize the visual programming interface. This highlights the extendability of the <a class="reference external" href="https://pyiron.org">pyiron</a> workflow framework.</p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="introduction.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Introduction</p>
      </div>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#young-s-modulus">Young’s Modulus</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#python-functions">Python Functions</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#from-functions-to-modulus">From Functions to Modulus</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Jan Janssen
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>